import { makeRequest2, navigateToTelefono, socket } from "../app.js";


export default function renderScreenStart(data) {
  const app = document.getElementById("app");
  app.innerHTML = `
    <div id="screenStart">
      <svg id="svgDecorativo" width="278" height="176" viewBox="0 0 278 176" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M29.3869 26.3012C29.0663 26.7415 28.4741 26.9166 28.0624 26.6843C20.5769 22.446 17.9264 21.4591 11.9646 28.3697C11.6061 28.7823 11.0079 28.8858 10.6284 28.6094C10.2488 28.3329 10.1636 27.7319 10.4463 27.264C15.3217 19.2928 13.9721 17.6363 7.64082 11.8129C7.26123 11.5365 7.27819 10.8751 7.59882 10.4348C7.91944 9.99449 8.51167 9.81936 8.92332 10.0518C16.4089 14.2901 18.4317 15.022 24.4897 7.97934C24.8483 7.56669 25.4464 7.46324 25.826 7.73966C26.2056 8.01608 26.2907 8.61709 26.008 9.08502C21.2289 16.9241 23.0136 19.0998 29.3829 24.9507C29.7625 25.2272 29.7776 25.8446 29.4249 26.3289L29.3869 26.3012Z" fill="#F0FC4C"/>
      <path d="M259.5 175.628C258.719 175.628 258.017 175.09 257.939 174.417C256.534 162.169 255.441 158.266 242.405 157.189C241.624 157.122 241 156.516 241 155.843C241 155.17 241.624 154.564 242.405 154.497C255.753 153.42 256.534 150.459 257.939 138.211C257.939 137.538 258.719 137 259.5 137C260.281 137 260.983 137.538 261.061 138.211C262.466 150.459 263.325 153.42 276.595 154.497C277.376 154.564 278 155.17 278 155.843C278 156.516 277.376 157.122 276.595 157.189C263.481 158.266 262.466 162.169 261.061 174.484C261.061 175.157 260.359 175.696 259.5 175.696V175.628Z" fill="white"/>
      </svg>
      <img src="https://cbnylposiazbgqyzeifz.supabase.co/storage/v1/object/sign/img/IMG-20241205-WA0010%204.png?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InN0b3JhZ2UtdXJsLXNpZ25pbmcta2V5XzZmMzU0ZTcyLTRmYWQtNGU1NS04ZDYyLWVmZDYwYThhMzUzMyJ9.eyJ1cmwiOiJpbWcvSU1HLTIwMjQxMjA1LVdBMDAxMCA0LnBuZyIsImlhdCI6MTc0NjM4NzYxMCwiZXhwIjoyMDkzMjgzNjEwfQ.CKCRQ54uns-7_CALuqZDpMKQdtojaIzQ6WcWW4kakjk" alt="">
      <div id="icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="49" height="50" viewBox="0 0 49 50" fill="none">
          <path d="M24.4999 0C10.9692 0 0 11.1751 0 24.96C0 38.7454 10.9692 49.9196 24.4999 49.9196C38.0319 49.9196 49 38.7454 49 24.96C49 11.176 38.0322 0 24.4999 0ZM35.7353 35.9994C35.2965 36.7327 34.3544 36.9652 33.6347 36.5151C27.8824 32.9354 20.641 32.1247 12.1129 34.1098C11.2911 34.3005 10.4719 33.7759 10.2847 32.9384C10.0965 32.1008 10.6094 31.2663 11.4332 31.0755C20.7659 28.9033 28.7712 29.8386 35.2292 33.8594C35.9489 34.3095 36.1771 35.2662 35.7353 35.9994ZM38.7341 29.2031C38.1811 30.1188 37.005 30.4079 36.1069 29.8445C29.5214 25.7206 19.4827 24.5263 11.6933 26.9352C10.6831 27.2461 9.61616 26.6661 9.30955 25.6386C9.00529 24.6095 9.5749 23.5245 10.5834 23.2116C19.481 20.4611 30.5424 21.7934 38.1051 26.5281C39.0032 27.0914 39.287 28.2893 38.7341 29.2031ZM38.9915 22.126C31.0953 17.3479 18.0676 16.9085 10.5287 19.2396C9.31804 19.6137 8.03779 18.9174 7.67092 17.6841C7.30405 16.4501 7.98689 15.1467 9.19838 14.7718C17.8526 12.0952 32.2392 12.6123 41.3302 18.1106C42.4215 18.769 42.7784 20.2018 42.1319 21.3097C41.4882 22.419 40.0769 22.7847 38.9915 22.126Z" fill="white"/>
        </svg>
      </div> 
      <h2>¡Welcome to the</h2>
      <h1>Musical Challenge!</h1>
      <div id="texto">
        <p>You are about to experience <br> something unique!!1</p>
        <button id="start">Start</button>
        <img src="https://firebasestorage.googleapis.com/v0/b/algoritmosdatos2024-02.appspot.com/o/imagesPosts%2Fmicro-center.png?alt=media&token=fc646eab-f107-4b69-ba35-603303c84132">
        <svg class="svg-fondo" width="440" height="351" viewBox="0 0 440 351" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_752_448)">
        <path d="M138.812 348.974C111.414 342.494 83.8654 336.31 56.616 329.429C39.9775 325.207 23.4634 320.416 8.61823 312.543C4.4835 310.433 -1.12074 307.773 0.274109 303.109C1.66896 298.444 8.29443 298.887 12.9771 298.697C38.4331 297.959 63.3163 302.074 88.1246 305.958C118.562 310.707 148.801 316.279 181.579 321.915C163.471 301.969 147.705 283.1 135.151 262.542C132.511 258.32 125.188 252.642 130.667 248.822C134.927 245.783 141.826 251.481 146.708 254.394C173.808 270.604 198.592 289.263 225.567 308.998L225.567 264.04C225.701 255.952 227.194 247.921 230.001 240.189C231.221 236.707 232.691 232.106 238.345 232.148C243.052 232.148 245.07 236.01 246.838 239.113C256.802 256.61 262.257 275.332 267.562 294.117C268.484 297.368 267.562 301.251 272.12 303.763C282.557 291.626 290.527 277.907 303.479 267.396C306.319 265.095 309.183 260.811 313.667 263.175C317.353 265.285 314.414 269 313.492 271.913C308.393 286.731 301.724 301.128 293.566 314.928C291.773 318.116 289.332 320.965 292.719 327.044C309.382 312.269 325.099 297.98 341.389 284.155C353.993 273.433 367.343 263.365 383.733 256.716C386.423 255.619 389.81 252.875 392.55 255.851C395.041 258.468 392.227 261.148 390.334 263.449C374.367 282.846 354.615 299.457 335.262 316.343C333.02 318.285 329.683 319.319 327.79 321.83C336.308 324.258 342.087 320.838 348.015 318.496C372.001 308.998 395.863 299.162 421.967 294.392C427.895 293.315 436.762 289.727 439.701 296.249C442.043 301.462 433.574 304.692 428.642 307.457C406.225 320.121 382.114 330.357 357.928 340.404C352.747 342.515 347.616 344.752 340.293 347.834C357.181 350.768 372.425 346.736 386.871 350.536C386.793 350.431 386.684 350.345 386.555 350.285C386.427 350.226 386.283 350.194 386.137 350.194C385.99 350.194 385.846 350.226 385.718 350.285C385.589 350.345 385.481 350.431 385.402 350.536C319.661 350.648 253.937 350.754 188.23 350.852C171.666 350.916 155.127 351.633 138.812 348.974Z" fill="#8EACF6"/>
        </g>
        <path d="M331.25 218.944C330.988 218.693 330.924 218.287 331.114 218.035C334.572 213.46 335.457 211.795 331.413 207.249C331.172 206.975 331.156 206.571 331.372 206.344C331.588 206.118 331.993 206.114 332.277 206.342C337.117 210.264 338.33 209.517 342.734 205.845C342.95 205.618 343.386 205.687 343.649 205.938C343.912 206.188 343.975 206.595 343.786 206.847C340.327 211.422 339.666 212.694 343.789 217.316C344.03 217.589 344.046 217.994 343.83 218.22C343.614 218.447 343.209 218.45 342.925 218.222C338.164 214.376 336.569 215.364 332.143 219.06C331.927 219.286 331.518 219.242 331.229 218.966L331.25 218.944Z" fill="white"/>
        <path d="M80.5 146.628C79.7194 146.628 79.0169 146.09 78.9388 145.417C77.5337 133.169 76.4409 129.266 63.4051 128.189C62.6245 128.122 62 127.516 62 126.843C62 126.17 62.6245 125.564 63.4051 125.497C76.7532 124.42 77.5337 121.459 78.9388 109.211C78.9388 108.538 79.7194 108 80.5 108C81.2806 108 81.9831 108.538 82.0612 109.211C83.4662 121.459 84.3249 124.42 97.5949 125.497C98.3755 125.564 99 126.17 99 126.843C99 127.516 98.3755 128.122 97.5949 128.189C84.481 129.266 83.4662 133.169 82.0612 145.484C82.0612 146.157 81.3586 146.696 80.5 146.696V146.628Z" fill="white"/>
        <path d="M282 32.6161C281.705 32.6161 281.439 32.4124 281.409 32.1578C280.878 27.5234 280.464 26.0465 275.532 25.6391C275.236 25.6136 275 25.3844 275 25.1298C275 24.8752 275.236 24.646 275.532 24.6205C280.582 24.2131 280.878 23.0927 281.409 18.4583C281.409 18.2037 281.705 18 282 18C282.295 18 282.561 18.2037 282.591 18.4583C283.122 23.0927 283.447 24.2131 288.468 24.6205C288.764 24.646 289 24.8752 289 25.1298C289 25.3844 288.764 25.6136 288.468 25.6391C283.506 26.0465 283.122 27.5234 282.591 32.1832C282.591 32.4379 282.325 32.6416 282 32.6416V32.6161Z" fill="white"/>
        <path d="M158.387 26.3012C158.066 26.7415 157.474 26.9166 157.062 26.6843C149.577 22.446 146.926 21.4591 140.965 28.3697C140.606 28.7823 140.008 28.8858 139.628 28.6094C139.249 28.3329 139.164 27.7319 139.446 27.264C144.322 19.2928 142.972 17.6363 136.641 11.8129C136.261 11.5365 136.278 10.8751 136.599 10.4348C136.919 9.99449 137.512 9.81936 137.923 10.0518C145.409 14.2901 147.432 15.022 153.49 7.97934C153.848 7.56669 154.446 7.46324 154.826 7.73966C155.206 8.01608 155.291 8.61709 155.008 9.08502C150.229 16.9241 152.014 19.0998 158.383 24.9507C158.762 25.2272 158.778 25.8446 158.425 26.3289L158.387 26.3012Z" fill="#F0FC4C"/>
        <path d="M122.129 206.598C122.404 207.068 122.327 207.681 121.949 207.964C115.063 213.121 113.096 215.153 117.034 223.386C117.268 223.88 117.123 224.469 116.717 224.706C116.312 224.943 115.727 224.78 115.412 224.333C110.067 216.669 108.008 217.241 100.134 220.704C99.728 220.941 99.129 220.66 98.8543 220.189C98.5796 219.719 98.6568 219.106 99.0349 218.823C105.92 213.666 107.402 212.107 103.382 203.732C103.148 203.238 103.293 202.649 103.699 202.412C104.104 202.176 104.689 202.339 105.004 202.785C110.267 210.308 112.976 209.546 120.891 206.059C121.296 205.823 121.868 206.057 122.17 206.574L122.129 206.598Z" fill="#F0FC4C"/>
        <path d="M339.387 118.301C339.066 118.742 338.474 118.917 338.062 118.684C330.577 114.446 327.926 113.459 321.965 120.37C321.606 120.782 321.008 120.886 320.628 120.609C320.249 120.333 320.164 119.732 320.446 119.264C325.322 111.293 323.972 109.636 317.641 103.813C317.261 103.536 317.278 102.875 317.599 102.435C317.919 101.994 318.512 101.819 318.923 102.052C326.409 106.29 328.432 107.022 334.49 99.9793C334.848 99.5667 335.446 99.4632 335.826 99.7397C336.206 100.016 336.291 100.617 336.008 101.085C331.229 108.924 333.014 111.1 339.383 116.951C339.762 117.227 339.778 117.845 339.425 118.329L339.387 118.301Z" fill="#F0FC4C"/>
        <defs>
        <clipPath id="clip0_752_448">
        <rect width="119" height="440" fill="white" transform="translate(440 232) rotate(90)"/>
        </clipPath>
        </defs>
        </svg>
      </div>
    </div>
    `;

    let secondsRemaining = 10;
    let buttonClicked = false;
  
    socket.on("game-status", ({ gameStarted }) => {
      if (gameStarted && !buttonClicked) {
        clearInterval(interval);
        navigateToTelefono("/screenSelectArtist", data);
      }
    });
  
    const interval = setInterval(async () => {
      if (secondsRemaining <= 0) {
        clearInterval(interval);
        if (!buttonClicked) {
          await makeRequest2("/update-game-status", "POST", {
            gameStarted: false,
          });
          navigateToTelefono("/timeUp", data);
        }
      } else {
        secondsRemaining--;
      }
    }, 1000);
  
    const start = document.getElementById("start");
    start.addEventListener("click", async () => {
      buttonClicked = true;
      await makeRequest2("/start-game", "POST", { message: "Juego iniciado desde TELÉFONO" });
      navigateToTelefono("/screenSelectArtist", data);
    });
}
